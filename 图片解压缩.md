# iOS图片解压缩

## 为什么要解压缩？
因为屏幕渲染图片之前，要把图片文件解压缩成bitmap，然后才能渲染。这个操作是在主线程执行的，非常耗时。
为什么要解压缩？因为

## 位图
位图就是一个像素数组，数组中的每个像素就代表着图片中的一个点。平时用到的png和jpeg都是位图。
图片有png和jpeg格式的，png支持alpha通道(透明)，无损压缩，jpeg图片则是有损压缩，可以指定 0-100% 的压缩比。
在将磁盘中的图片渲染到屏幕之前，必须先要得到图片的原始像素数据，才能执行后续的绘制操作，这就是为什么需要对图片解压缩的原因。

## 强制解压缩

在子线程提前解压缩。
强制解压缩的原理就是对图片进行重新绘制，得到一张新的解压缩后的位图。
中间主要经过了以下三个步骤：

使用 CGBitmapContextCreate 函数创建一个位图上下文；
使用 CGContextDrawImage 函数将原始位图绘制到上下文中；
使用 CGBitmapContextCreateImage 函数创建一张新的解压缩后的位图。
